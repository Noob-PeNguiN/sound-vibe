# SoundVibe Order Service 配置文件
server:
  port: 8085

spring:
  application:
    name: vibe-order
  
  # 数据源配置
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://localhost:3306/sound_vibe_db?useUnicode=true&characterEncoding=utf8&serverTimezone=Asia/Shanghai&useSSL=false&allowPublicKeyRetrieval=true
    username: root
    password: root
  
  # Redis 配置
  data:
    redis:
      host: localhost
      port: 6379
      database: 0

  # RabbitMQ 消息队列（用于订单超时取消）
  rabbitmq:
    host: localhost
    port: 5672
    username: guest
    password: guest
    listener:
      simple:
        acknowledge-mode: manual
        prefetch: 1

  # Nacos 服务注册与发现
  cloud:
    nacos:
      discovery:
        server-addr: localhost:8848
        namespace: public
        group: DEFAULT_GROUP

# MyBatis-Plus 配置
mybatis-plus:
  configuration:
    map-underscore-to-camel-case: true
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl
  global-config:
    db-config:
      id-type: auto
      logic-delete-field: deleted
      logic-delete-value: 1
      logic-not-delete-value: 0

# Feign 远程调用配置（开发环境直连，生产环境留空走 Nacos）
feign:
  catalog:
    url: http://localhost:8083

# 订单业务配置
order:
  timeout:
    # 订单超时时间（毫秒），默认 15 分钟
    ttl-ms: 900000

# 日志配置
logging:
  level:
    com.soundvibe.order: debug
    com.baomidou.mybatisplus: debug
